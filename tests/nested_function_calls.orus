// Test for nested function calls
// This tests the VM's ability to handle nested function calls

fn add(a: i32, b: i32) -> i32 {
    return a + b
}

fn multiply(a: i32, b: i32) -> i32 {
    return a * b
}

fn calculate(a: i32, b: i32, c: i32) -> i32 {
    return add(multiply(a, b), c)
}

print("Testing nested function calls:")
print(calculate(3, 4, 5))  // Should print 17 (3*4+5)
print(calculate(2, 5, 10)) // Should print 20 (2*5+10)
print(add(multiply(2, 3), multiply(4, 5)))  // Should print 26 (2*3 + 4*5)

// Testing deeper nesting
fn square(x: i32) -> i32 {
    return multiply(x, x)
}

fn complex(a: i32, b: i32) -> i32 {
    return add(square(a), multiply(a, b))
}

print("Testing deeper nested calls:")
print(complex(3, 4))  // Should print 21 (3*3 + 3*4)
print(complex(5, 2))  // Should print 35 (5*5 + 5*2)